---
title: 온-프레미스 MDM에 대 한 인증서
titleSuffix: Configuration Manager
description: Configuration Manager에서 온-프레미스 MDM (모바일 장치 관리)을 사용 하 여 신뢰할 수 있는 통신에 대 한 인증서를 설정 합니다.
ms.date: 01/09/2020
ms.prod: configuration-manager
ms.technology: configmgr-hybrid
ms.topic: conceptual
ms.assetid: 2a7d7170-1933-40e9-96d6-74a6eb7278e2
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: db78534fa58498c3b356033bac9a9a90ea1ffd05
ms.sourcegitcommit: 4ca147f2bb3de35bd5089743c832e00bc3babd19
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/15/2020
ms.locfileid: "76032711"
---
# <a name="set-up-certificates-for-trusted-communications-with-on-premises-mdm"></a>온-프레미스 MDM을 사용 하 여 신뢰할 수 있는 통신에 대 한 인증서 설정

*적용 대상: Configuration Manager (현재 분기)*

Configuration Manager 온-프레미스 MDM (모바일 장치 관리)을 사용 하려면 관리 되는 장치와 신뢰할 수 있는 통신에 대 한 사이트 시스템 역할을 구성 해야 합니다. 다음 두 가지 유형의 인증서가 필요 합니다.

- 필요한 사이트 시스템 역할을 호스트 하는 서버에서 IIS의 **웹 서버 인증서** 입니다. 한 서버에서 여러 사이트 시스템 역할을 호스트 하는 경우 해당 서버에 대 한 인증서가 하나만 필요 합니다. 각 역할이 별도의 서버에 있는 경우 각 서버에 별도의 인증서가 필요 합니다.

- 웹 서버 인증서를 발급 하는 CA (인증 기관)의 **신뢰할 수 있는 루트 인증서** 입니다. 사이트 시스템 역할에 연결 해야 하는 모든 장치에이 루트 인증서를 설치 합니다.

도메인에 가입 된 장치의 경우 Active Directory 인증서 서비스를 사용 하는 경우 모든 장치에 이러한 인증서를 자동으로 설치할 수 있습니다. 도메인에 가입 되지 않은 장치의 경우 다른 방법으로 신뢰할 수 있는 루트 인증서를 설치 합니다.

대량 등록 장치의 경우 등록 패키지에 인증서를 포함할 수 있습니다. 사용자가 등록하는 디바이스의 경우 메일, 웹 다운로드 또는 기타 몇 가지 방법을 통해 인증서를 추가해야 합니다.

Verisign 또는 GoDaddy와 같은 잘 알려진 공용 CA를 사용 하 여 서버 인증서를 발급 하는 경우에는 각 장치에서 신뢰할 수 있는 루트 인증서를 수동으로 설치 하지 않아도 됩니다. 대부분의 장치는 이러한 공개 기관을 기본적으로 신뢰 합니다. 이 방법은 다른 방법으로 인증서를 설치 하는 대신 사용자가 등록 한 장치에 대 한 유용한 대안입니다.

> [!IMPORTANT]  
> 장치와 온-프레미스 MDM에 대 한 사이트 시스템 서버 간의 신뢰할 수 있는 통신을 위해 인증서를 설정 하는 방법에는 여러 가지가 있습니다. 이 문서의 정보는이 작업을 수행 하는 한 가지 방법의 예입니다. 이 방법을 사용 하려면 인증 기관 및 인증 기관 웹 등록 역할을 사용 하는 Active Directory 인증서 서비스가 필요 합니다. 자세한 내용은 참조 [Active Directory 인증서 서비스](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/hh831740\(v=ws.11\))합니다.

## <a name="bkmk_configCa"></a>CRL 게시

기본적으로 Active Directory CA (인증 기관)는 LDAP 기반 Crl (인증서 해지 목록)을 사용 합니다. 이를 통해 도메인에 가입 된 장치에 대 한 CRL에 연결할 수 있습니다. 도메인에 가입 되지 않은 장치가 CA에서 발급 된 인증서를 신뢰 하도록 허용 하려면 HTTP 기반 CRL을 추가 합니다.

1. 사이트에 대 한 인증 기관을 실행 하는 서버에서 **시작** 메뉴로 이동 하 여 **관리 도구**를 선택 하 고 **인증 기관**을 선택 합니다.

1. 인증 기관 콘솔에서 **Certificateauthority**를 마우스 오른쪽 단추로 클릭 한 다음 **속성**을 선택 합니다.

1. CertificateAuthority 속성에서 **확장** 탭으로 전환 합니다. **확장 선택** 이 **CDP (CRL 배포 지점)** 로 설정 되어 있는지 확인 합니다.

1. `http://<ServerDNSName>/CertEnroll/<CAName><CRLNameSuffix><DeltaCRLAllowed>.crl`을(를) 선택합니다. 다음 옵션을 선택 합니다.

    - **Crl에를 포함 합니다. 클라이언트는이를 사용 하 여 델타 CRL 위치를 찾습니다.**

    - **발급된 인증서의 CDP 확장에 포함**

    - **발급된 CRL의 IDP 확장에 포함**

1. **끝내기 모듈** 탭으로 전환 합니다. **속성**을 선택 하 고 **인증서를 파일 시스템에 게시할 수 있음**을 선택 합니다. Active Directory 인증서 서비스를 다시 시작 하 라는 알림이 표시 됩니다.

1. **해지 된 인증서**를 마우스 오른쪽 단추로 클릭 하 고 **모든 작업**을 선택한 다음 **게시**를 선택 합니다.

1. CRL 게시 창에서 **델타 CRL만**을 선택 하 고 **확인** 을 선택 하 여 창을 닫습니다.

## <a name="bkmk_certTempl"></a>인증서 템플릿 만들기

CA는 웹 서버 인증서 템플릿을 사용 하 여 사이트 시스템 역할을 호스트 하는 서버에 대 한 인증서를 발급 합니다. 이러한 서버는 사이트 시스템 역할과 등록 된 장치 간의 신뢰할 수 있는 통신을 위한 SSL 끝점이 됩니다.

1. **CONFIGMGR MDM 서버**라는 도메인 보안 그룹을 만듭니다. 사이트 시스템 서버의 컴퓨터 계정을 그룹에 추가 합니다.

1. 인증 기관 콘솔에서 **인증서 템플릿**을 마우스 오른쪽 단추로 클릭 하 고 **관리**를 선택 합니다. 이 작업은 인증서 템플릿 콘솔을 로드 합니다.

1. 결과 창에서 **템플릿 표시 이름** 열의 **웹 서버** 가 표시 된 항목을 마우스 오른쪽 단추로 클릭 하 고 **중복 된 템플릿**을 선택 합니다.

1. 중복 된 **템플릿** 창에서 **windows 2003 Server, Enterprise edition** 또는 **Windows 2008 Server, Enterprise edition**을 선택한 다음 **확인**을 선택 합니다.

    > [!TIP]
    > Configuration Manager은 V3 또는 CNG (Cryptography: Next Generation) 인증서 라고도 하는 Windows 2008 서버 인증서 템플릿을 지원 합니다. 자세한 내용은 [CNG 인증서 개요](/configmgr/core/plan-design/network/cng-certificates-overview)를 참조하세요.

    CA가 Windows Server 2012 이상에서 실행 되는 경우이 창에는 인증서 템플릿 버전에 대 한 옵션이 표시 되지 않습니다. 템플릿을 복제 한 후 템플릿 속성의 **호환성** 탭에서 버전을 선택 합니다.

1. **새 템플릿의 속성** 창의 **일반** 탭에서 템플릿 이름을 입력 합니다. CA는이 이름을 사용 하 여 Configuration Manager 사이트 시스템에서 사용할 웹 인증서를 생성 합니다. 예를 들어 **CONFIGMGR MDM 웹 서버**를 입력 합니다.

1. **주체 이름** 탭으로 전환 하 고 **Active Directory 정보에서 빌드**를 선택 합니다. 주체 이름 형식으로 **DNS 이름**을 지정 합니다. **UPN (사용자 계정 이름)** 을 선택한 경우 대체 주체 이름에 대 한 옵션을 사용 하지 않도록 설정 합니다.

1. **보안** 탭으로 전환 합니다.

    1. **Domain admins** 및 **Enterprise Admins** 보안 그룹에서 **등록** 권한을 제거 합니다.

    1. **추가**를 선택 하 고 보안 그룹의 이름을 입력 합니다. 예: **CONFIGMGR MDM 서버**. **확인** 을 선택 하 여 창을 닫습니다.

    1. 이 그룹에 대 한 **등록** 권한을 선택 합니다. **읽기** 권한을 제거 하지 마십시오.

1. **확인** 을 선택 하 여 변경 내용을 저장 하 고 인증서 템플릿 콘솔을 닫습니다.

1. 인증 기관 콘솔에서 **인증서 템플릿**을 마우스 오른쪽 단추로 클릭 하 고 **새로 만들기**를 선택한 다음 **발급할 인증서 템플릿**을 선택 합니다.

1. **인증서 템플릿 사용** 창에서 새 템플릿을 선택 합니다. 예를 들어 **CONFIGMGR MDM 웹 서버**입니다. 그런 다음 **확인** 을 선택 하 여 창을 저장 하 고 닫습니다.

## <a name="bkmk_requestCert"></a>인증서 요청

이 프로세스에서는 IIS에 대 한 웹 서버 인증서를 요청 하는 방법을 설명 합니다. 온-프레미스 MDM에 대 한 역할 중 하나를 호스트 하는 각 사이트 시스템 서버에 대해이 프로세스를 수행 합니다.

1. 역할 중 하나를 호스트 하는 사이트 시스템 서버에서 관리자 권한으로 명령 프롬프트를 엽니다. `mmc`를 입력 하 여 빈 Microsoft Management Console을 엽니다.

1. 콘솔 창에서 **파일** 메뉴로 이동 하 고 **스냅인 추가/제거**를 선택 합니다.

    1. 사용 가능한 스냅인 목록에서 **인증서** 를 선택 하 고 **추가**를 선택 합니다.

    1. 인증서 스냅인 창에서 **컴퓨터 계정**을 선택 합니다. **다음**을 선택 하 고 **마침** 을 선택 하 여 로컬 컴퓨터를 관리 합니다.

    1. **확인** 을 선택 하 여 스냅인 추가/제거 창을 종료 합니다.

1. **인증서 (로컬 컴퓨터)** 를 확장 하 고 **개인** 저장소를 선택 합니다. **작업** 메뉴로 이동 하 여 **모든 작업**을 선택 하 고 **새 인증서 요청**을 선택 합니다. 이 작업은 Active Directory 인증서 서비스와 통신 하 여 이전에 만든 템플릿을 사용 하 여 새 인증서를 만듭니다.

    1. 인증서 등록 마법사의 시작 하기 전 페이지에서 **다음**을 선택 합니다.

    1. 인증서 등록 정책 선택 페이지에서 **Active Directory 등록 정책**을 선택 하 고 **다음**을 선택 합니다.

    1. 웹 서버 인증서 템플릿 (**CONFIGMGR MDM 웹 서버**)을 선택 하 고 **등록**을 선택 합니다.

    1. 인증서를 요청한 후 **마침**을 선택 합니다.

각 서버에는 고유한 웹 서버 인증서가 필요 합니다. 필요한 사이트 시스템 역할 중 하나를 호스트 하는 모든 서버에 대해이 프로세스를 반복 합니다. 한 서버에서 모든 사이트 시스템 역할을 호스트하는 경우 웹 서버 인증서를 하나만 요청하면 됩니다.

## <a name="bkmk_bindCert"></a>인증서 바인딩

다음 단계는 새 인증서를 웹 서버에 바인딩하는 것입니다. *등록 지점* 및 *등록 프록시 지점* 사이트 시스템 역할을 호스트 하는 각 서버에 대해이 프로세스를 수행 합니다. 한 서버에서 모든 사이트 시스템 역할을 호스트 하는 경우에는이 프로세스를 한 번만 수행 하면 됩니다.

> [!NOTE]
> 배포 지점 및 장치 관리 지점 사이트 시스템 역할에 대해이 프로세스를 수행할 필요가 없습니다. 등록 하는 동안 필요한 인증서가 자동으로 수신 됩니다.

1. 등록 지점 또는 등록 프록시 지점을 호스트 하는 서버에서 **시작** 메뉴로 이동 하 여 **관리 도구**를 선택한 다음 **IIS 관리자**를 선택 합니다.

1. 연결 목록에서 **기본 웹 사이트**를 선택한 다음 **바인딩 편집**을 선택 합니다.

    1. 사이트 바인딩 창에서 **https**를 선택한 다음 **편집**을 선택 합니다.

    1. 사이트 바인딩 편집 창에서 **SSL 인증서**에 대해 새로 등록 된 인증서를 선택 합니다. **확인** 을 선택 하 여 저장 하 고 **닫기**를 선택 합니다.

1. IIS 관리자 콘솔의 연결 목록에서 웹 서버를 선택 합니다. 오른쪽의 작업 패널에서 **다시 시작**을 선택 합니다. 이 작업은 웹 서버 서비스를 다시 시작 합니다.

## <a name="bkmk_exportCert"></a>신뢰할 수 있는 루트 인증서 내보내기

Active Directory 인증서 서비스는 모든 도메인에 가입 된 장치의 CA에서 필요한 인증서를 자동으로 설치 합니다. 도메인에 가입 되지 않은 장치에서 사이트 시스템 역할과 통신 하는 데 필요한 인증서를 가져오려면 웹 서버에 바인딩된 인증서에서 인증서를 내보냅니다.

1. IIS 관리자에서 **기본 웹 사이트**를 선택 합니다. 오른쪽의 작업 패널에서 **바인딩**을 선택 합니다.

1. 사이트 바인딩 창에서 **https**를 선택한 다음 **편집**을 선택 합니다.

1. 웹 서버 인증서를 선택 하 고 **보기**를 선택 합니다.

1. 웹 서버 인증서의 속성에서 **인증 경로** 탭으로 전환 합니다. 인증 경로의 루트를 선택 하 고 **인증서 보기**를 선택 합니다.

1. 루트 인증서의 속성에서 **세부 정보** 탭으로 전환한 다음 **파일에 복사**를 선택 합니다.

1. 인증서 내보내기 마법사의 시작 페이지에서 **다음**을 선택 합니다.

1. **DER로 인코딩된 이진 x.509 ()를 선택 합니다. 형식으로 CER)** 을 선택 하 고 **다음**을 선택 합니다.

1. 이 신뢰할 수 있는 루트 인증서를 식별 하려면 경로와 파일 이름을 입력 하십시오. 파일 이름에 대해 **찾아보기 ...** 를 클릭 하 고 인증서 파일을 저장할 위치를 선택 하 고 파일 이름을로 선택한 후 **다음**을 선택 합니다.

1. 설정을 검토 하 고 **마침** 을 선택 하 여 인증서를 파일로 내보냅니다.

인증 기관 설계에 따라 추가 하위 CA 루트 인증서를 내보내야 할 수 있습니다. 이 프로세스를 반복 하 여 웹 서버 인증서의 인증 경로에 있는 다른 인증서를 내보냅니다.

## <a name="next-step"></a>다음 단계

> [!div class="nextstepaction"]
> [디바이스 등록 설정](/configmgr/mdm/get-started/set-up-device-enrollment-on-premises-mdm)
