---
title: 정책 감시
titleSuffix: Configuration Manager
description: Policy Spy를 사용하여 Configuration Manager 클라이언트에서 정책 시스템을 보고 문제를 해결합니다.
ms.date: 07/30/2018
ms.prod: configuration-manager
ms.technology: configmgr-other
ms.topic: conceptual
ms.assetid: 1012ec24-27d9-4193-8236-918d283c7448
author: mestew
ms.author: mstewart
manager: dougeby
ms.collection: M365-identity-device-management
ms.openlocfilehash: 297aa9f8756b0c7214381e5e688f26cc21645fc4
ms.sourcegitcommit: 80cbc122937e1add82310b956f7b24296b9c8081
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 05/09/2019
ms.locfileid: "65500848"
---
# <a name="policy-spy"></a>정책 감시

*적용 대상: System Center Configuration Manager(현재 분기)*

Policy Spy는 [Configuration Manager 도구](/sccm/core/support/tools) 중 하나입니다. Configuration Manager 클라이언트에서 정책 시스템을 보고 문제를 해결하는 도구입니다. **PolicySpy.exe**를 실행하여 사용자 인터페이스를 엽니다. 명령줄 사용법에 대한 자세한 내용은 [명령줄 구문](#bkmk_policyspy-syntax)을 참조하세요.

> [!Important]  
> 관리자 권한으로 Policy Spy를 실행합니다. **관리자 권한으로 실행**하지 않으면 클라이언트 정보에 다음 오류가 표시됩니다.  
> `There is no client installed on this machine. Connection to client policy failed with error 80041003`


## <a name="bkmk_policyspy-syntax"></a> 명령줄 구문

Policy Spy는 기본적으로 사용자 인터페이스를 통해 사용하도록 되어 있습니다. 자동화 및 일괄 처리를 위한 제한적 명령줄 옵션은 제공합니다.

`PolicySpy.exe [/export <ExportFilename> [<computername>]]`

### <a name="option-export"></a>옵션: `/export`
이 옵션은 로컬 또는 원격 컴퓨터의 정책을 자동으로 내보냅니다. `<ExportFilename>`은 도구가 내보낸 XML 정책을 저장하는 파일 이름입니다. `<computername>` 옵션을 지정하면 Policy Spy가 로컬 컴퓨터 대신 해당 컴퓨터의 정책을 내보냅니다.

> [!Note]  
> 이 명령줄 옵션은 사용자 자격 증명을 지정하는 방법을 제공하지 않습니다. 다른 자격 증명을 사용하여 원격 컴퓨터에 액세스하려면 **runas** 명령을 사용하여 필요한 보안 자격 증명으로 새 명령 프롬프트를 엽니다.  


## <a name="usage"></a>사용

### <a name="tools-menu"></a>도구 메뉴

**도구** 메뉴에서는 다음 작업을 사용할 수 있습니다.  

- **원격 열기**:  원격 컴퓨터의 Configuration Manager 클라이언트 정책에 연결합니다. 연결 대화 상자를 사용하여 원격 컴퓨터의 이름과 선택적인 사용자 자격 증명을 검색합니다. 연결이 실패하면 클라이언트 정보 창에 오류 정보가 표시됩니다. 연결이 다시 실패하면 **편집** 메뉴 의 **새로 고침**을 선택하거나 F5 키를 누릅니다.  

- **파일 열기**: **정책 내보내기** 옵션으로 만든 정책 내보내기 파일(XML)을 엽니다. 이 도구는 내보낸 정책을 라이브 정책과 동일하게 표시합니다. 실제 클라이언트에 연결할 때만 적용되는 일부 기능은 비활성화됩니다.  

- **머신 할당 요청**: 대상 컴퓨터에서 머신 정책 할당 요청을 트리거합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  

- **머신 정책 평가**: 대상 컴퓨터에서 머신 정책 평가를 트리거합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  

- **사용자 할당 요청**: 현재 로그인한 사용자에 대해 사용자 정책 할당 요청을 트리거합니다. 이 기능은 로컬 컴퓨터에서 정책을 볼 때만 사용할 수 있습니다.  

- **사용자 정책 평가**: 현재 로그인한 사용자에 대해 사용자 정책 평가를 트리거합니다. 이 기능은 로컬 컴퓨터에서 정책을 볼 때만 사용할 수 있습니다.  

- **정책 재설정**: 기본이 아닌 모든 정책을 제거하고 사이트에 대해 정책 쿠키를 재설정합니다. 그런 다음, 머신 정책 할당 요청을 트리거합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  

- **정책 내보내기**: 대상 컴퓨터의 정책을 XML 파일로 내보냅니다. Policy Spy를 사용하여 모든 컴퓨터에서 이 파일을 봅니다. 내보내기 파일을 열려면 **도구** 메뉴에서 **파일 열기**를 선택합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  


### <a name="edit-menu"></a>편집 메뉴

**편집** 메뉴에서는 다음 작업을 사용할 수 있습니다.  

- **삭제**: 결과 창에서 선택한 인스턴스를 삭제합니다. 이 작업은 정책 인스턴스에 대해서만 지원됩니다. 정책 인스턴스 이외의 항목을 삭제하려 하면 도구가 오류 메시지를 표시합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  

- **새로 고침**: 최신 정보를 보기 위해 모든 결과를 새로 고칩니다. 새로 고치기 전에 확장한 모든 트리 노드는 자동으로 확장됩니다. Policy Spy가 대상 컴퓨터의 정책에 연결하지 못하면 다시 연결을 시도합니다. 이 기능은 내보낸 정책을 볼 때 비활성화됩니다.  

- **이벤트 지우기**: 이벤트 탭에서 모든 항목을 지웁니다.  



## <a name="results-pane"></a>결과 창

결과 창에서 대상 컴퓨터의 서로 다른 정책 시스템 보기를 표시합니다. 다음 4개 탭 중 하나를 클릭하여 이 보기에 액세스합니다. 
- [실제](#bkmk_policyspy-actual)
- [요청](#bkmk_policyspy-requested)
- [기본값](#bkmk_policyspy-default)
- [이벤트](#bkmk_policyspy-events)


### <a name="bkmk_policyspy-actual"></a> 실제

이 탭에는 클라이언트의 현재 정책이 표시됩니다. 현재 정책은 소프트웨어 배포, 인벤토리 등, 클라이언트의 동작 및 클라이언트 에이전트의 동작을 결정합니다. 이 탭은 컴퓨터 네임스페이스와 각각의 사용자 특정 네임스페이스에 대해 루트 노드와 트리 형식으로 결과를 표시합니다. 클래스의 목록을 표시하려면 네임스페이스 노드를 확장합니다. 인스턴스 목록을 표시하려면 클래스를 확장합니다. 클래스 목록에는 인스턴스가 있는 클래스만 포함됩니다.


### <a name="bkmk_policyspy-requested"></a> 요청

이 탭은 클라이언트가 할당된 사이트에서 검색한 정책 할당을 표시합니다. 이 탭은 머신 네임스페이스와 각각의 사용자 특정 네임스페이스에 대해 루트 노드와 트리 형식으로 결과를 표시합니다. 네임스페이스 노드를 확장하면 다음 노드가 표시됩니다.  

- **구성**: 정책 개체, 할당 및 기타를 포함하는 CCM_Policy_Config에서 파생된 구성 클래스 목록을 표시합니다.  

- **설정**: 정책이 생성한 모든 활성 설정을 표시합니다. 설정은 구성 노드 아래에 표시됩니다. 

> [!Note]   
> 클라이언트는 이 설정을 최종 결과 집합에 병합하지 않았으므로 여러 인스턴스가 같은 이름을 가질 수 있습니다. Policy Spy는 실제 정책 키가 아닌 RealKey 속성을 사용하여 이 노드 아래 인스턴스를 표시합니다. 실제 탭에 표시되는 결과 집합과 이 인스턴스를 상호 연결합니다.  


### <a name="bkmk_policyspy-default"></a> 기본값

이 탭은 **요청** 탭과 같은 정보를 표시합니다. DefaultMachine 및 DefaultUser 네임스페이스의 콘텐츠도 포함됩니다.


### <a name="bkmk_policyspy-events"></a> 이벤트

이 탭은 발생하는 정책 에이전트 이벤트를 표시합니다. 이 보기는 CCM_PolicyAgent_Event에서 파생된 모든 이벤트에 대해 WMI 이벤트 구독을 만듭니다. 이 보기는 최대 200개 이벤트를 표시합니다. 필요에 따라 가장 오래된 이벤트를 목록 맨 위에서 제거합니다. 목록에서 마지막 항목을 선택하면 새 이벤트를 추가할 때 목록이 자동으로 아래로 스크롤합니다. 그렇지 않으면 보기가 현재 위치를 유지하고, 새 이벤트를 보기 위해 사용자가 아래로 스크롤하거나 End 키를 눌러야 합니다. 이 보기는 내보낸 정책을 볼 때는 항상 비어 있습니다.



## <a name="client-info-pane"></a>클라이언트 정보 창
클라이언트 정보 창은 대상 컴퓨터의 속성 목록을 표시합니다. 사용 가능한 경우 다음 속성을 표시합니다.  
- Name
- ID
- Version
- 사이트
- 할당된 MP
- 상주 MP
- 프록시 MP
- 프록시 상태



## <a name="details-pane"></a>세부 정보 창
세부 정보 창에는 현재 선택에 대한 상세 정보가 표시됩니다. 활성 상태인 선택이 없으면 버전 등, Policy Spy 자체 정보를 표시합니다. 그렇지 않으면 선택한 항목의 MOF(Manage Object Format) 표현을 나타냅니다.

Policy Spy는 자체 MOF 생성 루틴을 사용하여 WMI에서 생성한 일반 텍스트 MOF보다 더 사용자 친화적인 HTML 표시를 만듭니다. 이 동작을 통해 Policy Spy가 다음 기능을 추가하여 MOF를 더 읽기 쉽게 할 수 있습니다.  

- 구문 강조 표시  

- 개체 및 배열 들여쓰기  

- 속성은 시스템, 상속 및 로컬 그룹에 정렬됩니다. 기본적으로 시스템과 상속된 그룹을 축소합니다. 인스턴스가 실제로 사용하는 속성을 즉시 볼 수 있습니다.  

- MOF를 복사하거나 일반 텍스트 MOF를 클립보드에 복사합니다. 이 기능은 MofComp 도구를 직접 호출하여 MOF를 다른 애플리케이션에 붙여 넣을 때 유용합니다.  

CCM_Policy_Policy에서 파생된 정책 개체 인스턴스의 경우 세부 정보 창이 표시하는 MOF 아래에 정책 본문을 표시합니다. 클라이언트가 정책 본문을 다운로드하지 않은 경우 Policy Spy가 하이퍼링크를 표시합니다. 링크를 클릭하여 클라이언트 관리 지점에서 직접 정책 본문을 다운로드할 수 있습니다. 도구가 정책 본문 다운로드에 성공하면 하이퍼링크를 응답 콘텐츠로 바꿉니다. 그렇지 않으면 Policy Spy가 업데이트되어 요청에 실패했음을 표시합니다.

